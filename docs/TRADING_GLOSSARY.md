# Торговый Глоссарий

Терминологический словарь для LSE Trading System

## A

### ATR (Average True Range)
**Средний истинный диапазон** - индикатор волатильности, который измеряет среднюю величину ценовых колебаний за определенный период. ATR помогает определить оптимальные уровни стоп-лосса и тейк-профита.

**Использование в системе:**
- Используется для оценки волатильности рынка
- Помогает выбрать подходящую стратегию (Momentum, Mean Reversion, VolatileGap)
- Влияет на размер стоп-лосса и тейк-профита

---

## M

### Mean Reversion (Возврат к среднему)
**Стратегия возврата к среднему** - торговая стратегия, основанная на предположении, что цена актива будет возвращаться к своему среднему значению после отклонения.

**Когда использовать:**
- Цена значительно отклонилась от скользящей средней (SMA)
- Высокая волатильность
- Нейтральный sentiment новостей

**Пример:** MSFT - стабильный актив, который часто возвращается к среднему значению после краткосрочных отклонений.

---

### Momentum (Следование тренду)
**Стратегия следования тренду** - торговая стратегия, которая предполагает, что текущий тренд будет продолжаться.

**Когда использовать:**
- Явный восходящий тренд (цена выше SMA)
- Низкая волатильность относительно среднего
- Положительный sentiment новостей

**Пример:** SNDK - актив с быстрыми движениями, где тренд может продолжаться длительное время.

---

## R

### RSI (Relative Strength Index)
**Индекс относительной силы** - технический индикатор, который измеряет силу и скорость ценовых движений. RSI помогает определить, не слишком ли "перегрет" актив после значительного роста.

**Диапазон значений:**
- 0-30: Перепроданность (возможен отскок вверх)
- 30-70: Нейтральная зона
- 70-100: Перекупленность (возможен отскок вниз)

**Использование в системе:**
- Помогает определить момент входа/выхода
- Предупреждает о возможных разворотах тренда
- Особенно важен для активов с большими движениями (например, SNDK после роста на 163%)

---

## S

### Sentiment Drift (Дрейф настроений)
**Дрейф настроений** - ситуация, когда новости уже позитивны, а цена еще не начала расти (или наоборот). Это создает возможность для раннего входа в позицию.

**Как работает:**
1. Появляются позитивные новости (sentiment > 0.0 в центрированной шкале, или > 0.5 в базовой шкале 0.0-1.0)
2. Цена еще не отреагировала полностью
3. AnalystAgent "ловит" этот момент и генерирует сигнал BUY
4. Цена начинает расти, следуя за sentiment

**Важно:** В системе используется центрированная шкала sentiment (-1.0 до 1.0), где:
- **0.0** = нейтральный (вместо 0.5 в базовой шкале)
- **> 0.0** = положительный
- **< 0.0** = отрицательный

**Пример:** Новость о росте выручки компании на 50% может привести к росту цены акций, но с задержкой. Система анализирует sentiment и может войти в позицию до полного отражения новости в цене.

---

### Sentiment Score (Оценка настроений)
**Оценка настроений** - числовая оценка эмоциональной окраски новостей.

**Шкалы:**
- **0.0-1.0** (базовая): 0.0 = очень отрицательный, 0.5 = нейтральный, 1.0 = очень положительный
- **-1.0 до 1.0** (центрированная): -1.0 = очень отрицательный, 0.0 = нейтральный, 1.0 = очень положительный

**Использование в системе:**
- Внутри стратегий используется центрированная шкала (-1.0 до 1.0) для удобства математических операций
- Для совместимости с БД и LLM используется базовая шкала (0.0-1.0)
- Конвертация выполняется автоматически через `utils.sentiment_utils`

---

## V

### Volatile Gap (Волатильный гэп)
**Стратегия торговли на волатильных гэпах** - торговая стратегия, которая использует резкие движения цены (гэпы) для входа/выхода.

**Когда использовать:**
- Очень высокая волатильность (более чем в 1.5 раза выше среднего)
- Большие ценовые гэпы (цена открытия сильно отличается от закрытия)
- Важные новости (макро-события)
- Экстремальный sentiment (очень положительный или очень отрицательный)

**Пример:** "Вертолеты" - активы с резкими движениями, где цена может "прыгать" на 5-10% за один день.

---

## W

### Weighted Sentiment (Взвешенный sentiment)
**Взвешенный sentiment** - средний sentiment новостей, рассчитанный с учетом весов.

**Веса:**
- **2.0** - новости с упоминанием конкретного тикера (более важные)
- **1.0** - макро-новости (US_MACRO, MACRO)

**Формула:**
```
weighted_sentiment = Σ(sentiment_i * weight_i) / Σ(weight_i)
```

**Использование в системе:**
- Учитывает важность новостей для конкретного тикера
- Помогает принимать более точные решения
- Используется в стратегиях для корректировки сигналов

---

## I

### Insight (Инсайт)
**Ключевой финансовый факт** - краткое извлечение из новости, содержащее конкретный финансовый факт.

**Примеры:**
- "рост 163%" - процент роста цены или выручки
- "падение на 5%" - процент падения
- "новый продукт" - важное событие компании

**Использование в системе:**
- Извлекается автоматически через LLM при анализе sentiment
- Хранится в базе данных (`knowledge_base.insight`)
- Отображается в веб-интерфейсе и логах
- Помогает быстро понять суть новости без чтения полного текста

---

## T

### Technical Signal (Технический сигнал)
**Технический сигнал** - сигнал, основанный на технических индикаторах (SMA, волатильность).

**Типы сигналов:**
- **BUY** - сигнал на покупку (цена выше SMA, низкая волатильность)
- **SELL** - сигнал на продажу (цена ниже SMA, высокая волатильность)
- **HOLD** - удержание позиции (неопределенность)

**Использование в системе:**
- Генерируется на основе технических индикаторов
- Комбинируется с sentiment для финального решения
- Используется стратегиями для выбора действий

---

## С

### Strategy Manager (Менеджер стратегий)
**Интеллектуальный диспетчер стратегий** - модуль, который автоматически выбирает оптимальную стратегию на основе режима рынка.

**Логика выбора:**
1. **VolatileGapStrategy**: очень высокая волатильность + гэп или экстремальный sentiment
2. **MomentumStrategy**: низкая волатильность + положительный sentiment
3. **MeanReversionStrategy**: высокая волатильность + нейтральный sentiment

**Преимущества:**
- Адаптивный выбор стратегии
- Учет текущих рыночных условий
- Автоматическая оптимизация под разные активы

---

## B

### Backtesting (Бэктестинг)
**Бэктестинг** - процесс тестирования торговой стратегии на исторических данных для оценки ее эффективности.

**Важно:**
- Результаты в прошлом не гарантируют прибыли в будущем
- Бэктестинг помогает выявить ошибки в коде до реальной торговли
- Позволяет оптимизировать параметры стратегии (стоп-лосс, тейк-профит)

**Использование в системе:**
- Прогон стратегий на исторических данных из `quotes`
- Анализ эффективности разных стратегий (Momentum vs Mean Reversion)
- Выявление проблемных паттернов (например, циклические сделки)

---

## D

### Drawdown (Просадка)
**Просадка** - максимальное падение баланса портфеля от пиковой точки.

**Типы:**
- **Максимальная просадка (Max Drawdown)**: Наибольшее падение от пика до минимума
- **Текущая просадка**: Текущее падение от последнего пика

**Пример:**
- Баланс вырос до $120,000 (пик)
- Упал до $95,000 (минимум)
- Просадка = (120,000 - 95,000) / 120,000 = 20.8%

**Использование в системе:**
- Стоп-лосс на уровне 0.95 (5% падение) призван минимизировать просадку
- Мониторинг просадки помогает оценить риск стратегии
- Высокая просадка может указывать на необходимость корректировки стратегии

---

## S

### Slippage (Проскальзывание)
**Проскальзывание** - разница между ценой, которую увидел AnalystAgent, и ценой, по которой ExecutionAgent реально совершил сделку.

**Причины:**
- Задержка между анализом и исполнением
- Низкая ликвидность инструмента
- Рыночные гэпы (особенно на открытии/закрытии)

**На LSE это критично:**
- LSE (London Stock Exchange) может иметь меньшую ликвидность, чем NYSE
- Проскальзывание может "съесть" прибыль от сделки
- Особенно важно для стратегий с частыми сделками

**Использование в системе:**
- Учитывается через комиссию (COMMISSION_RATE = 0.1%)
- При расчете PnL используется реальная цена исполнения
- Для точного учета можно добавить отдельное поле `slippage` в `trade_history`

---

## Дополнительные термины

### Stop-Loss (Стоп-лосс)
Процент от цены входа, при достижении которого позиция автоматически закрывается для ограничения убытков.

### Take-Profit (Тейк-профит)
Процент от цены входа, при достижении которого позиция автоматически закрывается для фиксации прибыли.

### SMA (Simple Moving Average)
Простая скользящая средняя - среднее значение цены за определенный период (например, 5 дней).

### Volatility (Волатильность)
Мера изменчивости цены актива. Высокая волатильность означает большие колебания цены.

### Whipsaw (Пила)
**Пила** - ситуация, когда стратегия быстро открывает и закрывает позиции из-за частых изменений сигналов, что приводит к убыткам из-за комиссий.

**Признаки:**
- Частые сделки (более 3-5 в день по одному тикеру)
- Чередование BUY и SELL сигналов
- Низкий или отрицательный PnL несмотря на активную торговлю

**Защита:**
- Минимальный интервал между сделками (cooldown period)
- Фильтрация слабых сигналов (только STRONG_BUY/STRONG_SELL)
- Мониторинг частоты сделок в ExecutionAgent

---

## См. также

- [Strategy Factory Documentation](STRATEGY_FACTORY.md)
- [LLM Integration Guide](LLM_GUIDANCE.md)
- [Vector KB Implementation](VECTOR_KB_IMPLEMENTATION.md)

